{"ast":null,"code":"import Cookies from 'js-cookie';\nimport { setAuthenticated } from './actions/index';\nimport Store from './config/configureStore';\nexport function Fetch(url, method, body = null) {\n  const csrf_token = Cookies.get('CSRF-Token');\n  return fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type': 'application/json',\n      ...(csrf_token && {\n        \"X-CSRF-Token\": `${csrf_token}`\n      })\n    },\n    credentials: 'same-origin',\n    ...(body && {\n      body: body\n    })\n  }).then(response => {\n    return Promise.all([response.status, response.json()]);\n  }).then(([status, response]) => {\n    if (status === 401) {\n      Store.dispatch(setAuthenticated({\n        authenticated: false,\n        name: ''\n      }));\n    }\n\n    return Promise.all([status, response]);\n  });\n}\n_c = Fetch;\n\nvar _c;\n\n$RefreshReg$(_c, \"Fetch\");","map":{"version":3,"sources":["/home/npzd/devspace/crate/crate-client/src/FetchHelper.js"],"names":["Cookies","setAuthenticated","Store","Fetch","url","method","body","csrf_token","get","fetch","headers","credentials","then","response","Promise","all","status","json","dispatch","authenticated","name"],"mappings":"AAAA,OAAOA,OAAP,MAAoB,WAApB;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AAEA,OAAO,SAASC,KAAT,CAAeC,GAAf,EAAoBC,MAApB,EAA4BC,IAAI,GAAG,IAAnC,EAAyC;AAC9C,QAAMC,UAAU,GAAGP,OAAO,CAACQ,GAAR,CAAY,YAAZ,CAAnB;AAEA,SAAOC,KAAK,CAACL,GAAD,EAAM;AAChBC,IAAAA,MAAM,EAAEA,MADQ;AAEhBK,IAAAA,OAAO,EAAE;AACP,sBAAe,kBADR;AAEP,UAAIH,UAAU,IAAI;AAAC,wBAAkB,GAAEA,UAAW;AAAhC,OAAlB;AAFO,KAFO;AAMhBI,IAAAA,WAAW,EAAE,aANG;AAOhB,QAAIL,IAAI,IAAI;AAACA,MAAAA,IAAI,EAAEA;AAAP,KAAZ;AAPgB,GAAN,CAAL,CASNM,IATM,CASDC,QAAQ,IAAI;AAChB,WAAOC,OAAO,CAACC,GAAR,CAAY,CAACF,QAAQ,CAACG,MAAV,EAAkBH,QAAQ,CAACI,IAAT,EAAlB,CAAZ,CAAP;AACD,GAXM,EAYNL,IAZM,CAYD,CAAC,CAACI,MAAD,EAASH,QAAT,CAAD,KAAwB;AAC5B,QAAGG,MAAM,KAAK,GAAd,EAAmB;AACjBd,MAAAA,KAAK,CAACgB,QAAN,CAAejB,gBAAgB,CAAC;AAACkB,QAAAA,aAAa,EAAE,KAAhB;AAAuBC,QAAAA,IAAI,EAAE;AAA7B,OAAD,CAA/B;AACD;;AAED,WAAON,OAAO,CAACC,GAAR,CAAY,CAACC,MAAD,EAASH,QAAT,CAAZ,CAAP;AACD,GAlBM,CAAP;AAmBD;KAtBeV,K","sourcesContent":["import Cookies from 'js-cookie';\nimport { setAuthenticated } from './actions/index';\nimport Store from './config/configureStore'\n\nexport function Fetch(url, method, body = null) {\n  const csrf_token = Cookies.get('CSRF-Token');\n\n  return fetch(url, {\n    method: method,\n    headers: {\n      'Content-Type':'application/json',\n      ...(csrf_token && {\"X-CSRF-Token\" : `${csrf_token}`})\n    },\n    credentials: 'same-origin',\n    ...(body && {body: body})\n  })\n  .then(response => {\n    return Promise.all([response.status, response.json()])\n  })\n  .then(([status, response]) => {\n    if(status === 401) {\n      Store.dispatch(setAuthenticated({authenticated: false, name: ''}))\n    }\n\n    return Promise.all([status, response])\n  })\n}\n"]},"metadata":{},"sourceType":"module"}