{"ast":null,"code":"var _jsxFileName = \"/home/npzd/devspace/crate/crate-client/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from '@apollo/client/react';\nimport { ApolloClient, createHttpLink, InMemoryCache, from } from '@apollo/client';\nimport { onError } from \"@apollo/client/link/error\";\nimport { setContext } from '@apollo/client/link/context';\nimport { Fetch } from './FetchHelper.js';\nimport Cookies from 'js-cookie';\nimport { setAuthenticated } from './actions/index';\nimport store from \"./config/configureStore\";\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles'; // get temp session / csrf token from server\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nFetch('temporary_session', 'get');\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      light: '#4dabf5',\n      main: '#2196f3',\n      dark: '#1769aa' // contrastText: '#fff',\n\n    },\n    secondary: {\n      light: '#f73378',\n      main: '#f50057',\n      dark: '#ab003c' // contrastText: '#fff',\n\n    }\n  }\n});\nconst httpLink = createHttpLink({\n  uri: '/graphql'\n});\nconst csrfLink = setContext((_, {\n  headers\n}) => {\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: { ...headers,\n      'X-CSRF-Token': Cookies.get('CSRF-Token')\n    }\n  };\n});\nconst errorLink = onError(({\n  networkError\n}) => {\n  if (networkError && [401, 422].includes(networkError.statusCode)) {\n    store.dispatch(setAuthenticated({\n      authenticated: false,\n      name: ''\n    }));\n    Fetch('temporary_session', 'get');\n  }\n});\nconst client = new ApolloClient({\n  link: from([errorLink, csrfLink, httpLink]),\n  cache: new InMemoryCache()\n});\nReactDOM.render( /*#__PURE__*/_jsxDEV(Provider, {\n  store: store,\n  children: /*#__PURE__*/_jsxDEV(MuiThemeProvider, {\n    theme: theme,\n    children: /*#__PURE__*/_jsxDEV(ApolloProvider, {\n      client: client,\n      children: /*#__PURE__*/_jsxDEV(App, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this)\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 64,\n  columnNumber: 3\n}, this), document.getElementById('root'));","map":{"version":3,"sources":["/home/npzd/devspace/crate/crate-client/src/index.js"],"names":["React","ReactDOM","App","Provider","ApolloProvider","ApolloClient","createHttpLink","InMemoryCache","from","onError","setContext","Fetch","Cookies","setAuthenticated","store","MuiThemeProvider","createMuiTheme","theme","palette","type","primary","light","main","dark","secondary","httpLink","uri","csrfLink","_","headers","get","errorLink","networkError","includes","statusCode","dispatch","authenticated","name","client","link","cache","render","document","getElementById"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,QAAP,MAAqB,WAArB;AACA,OAAO,aAAP;AACA,OAAOC,GAAP,MAAgB,OAAhB;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,SAASC,cAAT,QAA+B,sBAA/B;AACA,SAASC,YAAT,EAAuBC,cAAvB,EAAuCC,aAAvC,EAAsDC,IAAtD,QAAkE,gBAAlE;AACA,SAASC,OAAT,QAAwB,2BAAxB;AACA,SAASC,UAAT,QAA2B,6BAA3B;AACA,SAASC,KAAT,QAAsB,kBAAtB;AACA,OAAOC,OAAP,MAAoB,WAApB;AACA,SAASC,gBAAT,QAAiC,iBAAjC;AACA,OAAOC,KAAP,MAAkB,yBAAlB;AACA,SAASC,gBAAT,EAA2BC,cAA3B,QAAiD,0BAAjD,C,CAEA;;;AACAL,KAAK,CAAC,mBAAD,EAAsB,KAAtB,CAAL;AAEA,MAAMM,KAAK,GAAGD,cAAc,CAAC;AAC3BE,EAAAA,OAAO,EAAE;AACPC,IAAAA,IAAI,EAAE,MADC;AAEPC,IAAAA,OAAO,EAAE;AACPC,MAAAA,KAAK,EAAE,SADA;AAEPC,MAAAA,IAAI,EAAE,SAFC;AAGPC,MAAAA,IAAI,EAAE,SAHC,CAIP;;AAJO,KAFF;AAQPC,IAAAA,SAAS,EAAE;AACTH,MAAAA,KAAK,EAAE,SADE;AAETC,MAAAA,IAAI,EAAE,SAFG;AAGTC,MAAAA,IAAI,EAAE,SAHG,CAIT;;AAJS;AARJ;AADkB,CAAD,CAA5B;AAkBA,MAAME,QAAQ,GAAGnB,cAAc,CAAC;AAC9BoB,EAAAA,GAAG,EAAE;AADyB,CAAD,CAA/B;AAIA,MAAMC,QAAQ,GAAGjB,UAAU,CAAC,CAACkB,CAAD,EAAI;AAAEC,EAAAA;AAAF,CAAJ,KAAoB;AAC9C;AACA,SAAO;AACLA,IAAAA,OAAO,EAAE,EACP,GAAGA,OADI;AAEP,sBAAgBjB,OAAO,CAACkB,GAAR,CAAY,YAAZ;AAFT;AADJ,GAAP;AAMD,CAR0B,CAA3B;AAUA,MAAMC,SAAS,GAAGtB,OAAO,CAAC,CAAC;AAAEuB,EAAAA;AAAF,CAAD,KAAsB;AAC9C,MAAIA,YAAY,IAAI,CAAC,GAAD,EAAM,GAAN,EAAWC,QAAX,CAAoBD,YAAY,CAACE,UAAjC,CAApB,EAAkE;AAChEpB,IAAAA,KAAK,CAACqB,QAAN,CAAetB,gBAAgB,CAAC;AAACuB,MAAAA,aAAa,EAAE,KAAhB;AAAuBC,MAAAA,IAAI,EAAE;AAA7B,KAAD,CAA/B;AACA1B,IAAAA,KAAK,CAAC,mBAAD,EAAsB,KAAtB,CAAL;AACD;AACF,CALwB,CAAzB;AAOA,MAAM2B,MAAM,GAAG,IAAIjC,YAAJ,CAAiB;AAC9BkC,EAAAA,IAAI,EAAE/B,IAAI,CAAC,CAACuB,SAAD,EAAYJ,QAAZ,EAAsBF,QAAtB,CAAD,CADoB;AAE9Be,EAAAA,KAAK,EAAE,IAAIjC,aAAJ;AAFuB,CAAjB,CAAf;AAKAN,QAAQ,CAACwC,MAAT,eACE,QAAC,QAAD;AAAU,EAAA,KAAK,EAAE3B,KAAjB;AAAA,yBACE,QAAC,gBAAD;AAAkB,IAAA,KAAK,EAAEG,KAAzB;AAAA,2BACE,QAAC,cAAD;AAAgB,MAAA,MAAM,EAAEqB,MAAxB;AAAA,6BACE,QAAC,GAAD;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA;AADF;AAAA;AAAA;AAAA;AAAA,QADF,EAQEI,QAAQ,CAACC,cAAT,CAAwB,MAAxB,CARF","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport { Provider } from \"react-redux\";\nimport { ApolloProvider } from '@apollo/client/react';\nimport { ApolloClient, createHttpLink, InMemoryCache, from } from '@apollo/client';\nimport { onError } from \"@apollo/client/link/error\";\nimport { setContext } from '@apollo/client/link/context';\nimport { Fetch } from './FetchHelper.js'\nimport Cookies from 'js-cookie';\nimport { setAuthenticated } from './actions/index';\nimport store from \"./config/configureStore\";\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\n// get temp session / csrf token from server\nFetch('temporary_session', 'get')\n\nconst theme = createMuiTheme({\n  palette: {\n    type: 'dark',\n    primary: {\n      light: '#4dabf5',\n      main: '#2196f3',\n      dark: '#1769aa',\n      // contrastText: '#fff',\n    },\n    secondary: {\n      light: '#f73378',\n      main: '#f50057',\n      dark: '#ab003c',\n      // contrastText: '#fff',\n    }\n  }\n});\n\nconst httpLink = createHttpLink({\n  uri: '/graphql',\n});\n\nconst csrfLink = setContext((_, { headers }) => {\n  // return the headers to the context so httpLink can read them\n  return {\n    headers: {\n      ...headers,\n      'X-CSRF-Token': Cookies.get('CSRF-Token')\n    }\n  }\n});\n\nconst errorLink = onError(({ networkError }) => {\n  if (networkError && [401, 422].includes(networkError.statusCode)) {\n    store.dispatch(setAuthenticated({authenticated: false, name: ''}));\n    Fetch('temporary_session', 'get')\n  }\n});\n\nconst client = new ApolloClient({\n  link: from([errorLink, csrfLink, httpLink]),\n  cache: new InMemoryCache()\n});\n\nReactDOM.render(\n  <Provider store={store}>\n    <MuiThemeProvider theme={theme}>\n      <ApolloProvider client={client}>\n        <App />\n      </ApolloProvider>\n    </MuiThemeProvider>\n  </Provider>,\n  document.getElementById('root')\n);\n"]},"metadata":{},"sourceType":"module"}